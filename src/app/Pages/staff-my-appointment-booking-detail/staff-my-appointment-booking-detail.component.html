<app-inner-header></app-inner-header>
<div class="body-grey">
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' ,fullScreenBackdrop:true}"></ngx-loading>


<div class="studio-details">
    <div class="container">
        <app-sub-header></app-sub-header>
      <div class="s-d-appoint pb-5">
        <div class="row mb-3">
          <div class="col-6 text-left">
            <h4 class="title brand-color2"> Appointment Scheduled </h4>
          </div>
            <!-- <div class="col-6 text-right " >
            </div> -->
          <div class="col-6 text-right " >
            <button type="button" class="btn btn-blue-grad px-2 text-uppercase mr-2" (click)="sendEmail()" *ngIf="(backUrl == '/appointment' || backUrl == '/my-appointment') && (booking_Detail.booking_status !='Confirm')">Email Receipt</button>
            <button type="button" class="btn btn-blue-grad px-2 text-uppercase" (click)="commonservice.back()" *ngIf="backUrl != '/booking-payment'" >Back </button>
          </div>
        </div><!--(click)="redirect()"    End of Heading -->

        <div class="s-d-appoint-block">
          <div class="row">
            <div class="col-12 col-lg-6 mt-3 mt-lg-0">
              <div class="s-d-appoint-block-left border-radius6 box-shadow1 white-bg">

                <div class="px-3 pt-3 border-bottom">
                  <div class="row">
                    <div class="col-8 col-md-6">
                      <h5 class="title black-color font-w-100 text-uppercase font-16 mb-3 pb-2"> customer details </h5>
                    </div>
                    <!-- <div class="col-4 col-md-6 text-right">
                      <a href="Javascript:void(0);" class="brand-color1 font-14 font-w-600"> Change </a>
                    </div> -->
                  </div><!-- end of heading -->
                  <div class="row">
                    <div class="col-6 col-md-5 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Name </p>
                      <p class="black-color font-w-100 font-18">  {{booking_Detail.Name}}</p>                      
                    </div><!-- end of col-3 {{booking_Detail.gender}}{{booking_Detail.age}} -->

                    <div class="col-6 col-md-3 text-left mb-2 pl-2 pl-md-0">
                      <p class="black-color font-w-100 font-14 mb-0"> Gender </p>
                      <p class="black-color font-w-100 font-18"> {{booking_Detail.gender}} </p>                      
                    </div><!-- end of col-3 -->

                    <div class="col-6 col-md-3 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Age </p>
                      <p class="black-color font-w-100 font-18"> {{booking_Detail.age}} years </p>                      
                    </div><!-- end of col-3 -->
                  </div><!-- end of row -->
                </div><!-- Customer details -->

                <div class="px-3 pt-3 border-bottom">
                  <div class="row">
                    <div class="col-8 col-md-6">
                      <h5 class="title black-color font-w-100 text-uppercase font-16 mb-3 pb-2"> Appointments details </h5>
                    </div>
                    <!-- <div class="col-4 col-md-6 text-right">
                      <a href="Javascript:void(0);" class="brand-color1 font-14 font-w-600"> Change </a>
                    </div> -->
                  </div><!-- end of heading -->
                  <div class="row">
                    <div class="col-6 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Instructor </p>
                      <p class="black-color font-w-100 font-18">{{booking_Detail.instructor_name}} {{booking_Detail.instructor_lastname}} </p>                      
                    </div><!-- end of col-3 -->

                    <div class="col-6 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Duration </p>
                      <p class="black-color font-w-100 font-18">{{booking_Detail.duration}} Min. </p>                      
                    </div><!-- end of col-3 -->

                    <div class="col-6 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Time </p>
                      <p class="black-color font-w-100 font-18"> {{booking_Detail.start_time_new}} - {{booking_Detail.end_time_new}} </p>                      
                    </div><!-- end of col-3 -->

                    <div class="col-6 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Date </p>
                      <p class="black-color font-w-100 font-18">{{booking_Detail.start_date_utc_new}}  </p>                      
                    </div><!-- end of col-3 -->

                

                    <!-- <div class="col-6 col-md-6 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Skills </p>
                      <p class="black-color font-w-100 font-18"> Friendly, Nurturing Attitude </p>                      
                    </div> -->
                    <!-- end of col-3 -->
                  </div><!-- end of row -->
                </div><!-- Appointments details -->

                <div class="px-3 pt-3 border-bottom">
                  <div class="row">
                    <div class="col-12 text-left mb-2">
                      <h5 class="title black-color font-w-100 text-uppercase font-16 mb-3 pb-2"> service details </h5>
                      <p class="black-color font-w-100 font-14 mb-0"> Service Name </p>
                      <p class="black-color font-w-100 font-18"> {{booking_Detail.service_name}} </p>            
                    </div><!-- end of col-3 -->
                    <div class="col-12 text-left mb-2">
                      <p class="black-color font-w-100 font-14 mb-0"> Location </p>
                      <p class="black-color font-w-100 font-18" *ngIf="booking_Detail.location_url"><a href="{{booking_Detail.location_url}}" target="_blank" title="{{booking_Detail.location_url}}">{{booking_Detail.location_name}},   {{booking_Detail.location_address}} </a></p>            

                      <p class="black-color font-w-100 font-18" *ngIf="!booking_Detail.location_url"> {{booking_Detail.location_name}},   {{booking_Detail.location_address}} </p>            
                      <p class="black-color font-w-100 font-14 mb-0"> Web Link </p>
                      <p class="black-color font-w-100 font-18" *ngIf="booking_Detail.web_link"><a href="{{booking_Detail.web_link}}" target="_blank"><i class="fa fa-link" aria-hidden="true" title="{{booking_Detail.web_link}}"></i>
                      </a></p>            

                      <p class="black-color font-w-100 font-18" *ngIf="!booking_Detail.web_link"> N/A</p>            
                    
                    </div><!-- end of col-3 -->
                  </div><!-- end of row -->
                </div><!-- Appointments details -->             
              </div><!-- end of s-d-appoint-block-left -->
            </div><!-- end of col-md-6 -->

            <div class="col-12 col-lg-6 mt-5 mt-lg-0">
              <div class="s-d-appoint-block-right border-radius6 box-shadow1 white-bg">
                <div class="px-3 py-3 text-left light-bg border-t-lr-6">
                  <h5 class="title black-color font-w-100 text-uppercase font-16 mb-0"> payment details </h5>
                </div><!-- top heading -->

                <div class="px-3 pt-4 pb-2 border-bottom">
                  <div class="row mb-2">
                    <div class="col-6 text-left">
                      <p class="black-color font-w-100 font-18"> Appointment Fees: </p>
                    </div>
                    <div class="col-6 text-right">
                      <p class="black-color font-w-100 font-18"> $ {{booking_Detail.amount}} </p>
                    </div>
                  </div>
                  <!-- <div class="row">
                    <div class="col-6 text-left">
                      <p class="black-color font-w-100 font-18"> Tax </p>
                    </div>
                    <div class="col-6 text-right">
                      <p class="black-color font-w-100 font-18"> $ {{booking_Detail.service_tax_price}} </p>
                    </div>
                  </div> -->

                        <div class="row">
                      <div class="col-6 text-left">
                        <p class="black-color font-w-100 font-18"> Tax 1 </p>
                      </div>
                      <div class="col-6 text-right">
                        <p class="black-color font-w-100 font-18"> $ {{booking_Detail.tax1_rate}} </p>
                      </div>
                      <div class="col-6 text-left">
                        <p class="black-color font-w-100 font-18"> Tax 2 </p>
                      </div>
                      <div class="col-6 text-right">
                        <p class="black-color font-w-100 font-18"> $ {{booking_Detail.tax2_rate}} </p>
                      </div>
                    </div>
                </div><!-- end of Appointment Fees: -->

                <div class="px-3 pt-4 pb-3 border-bottom">
                  <div class="row mb-2">
                    <div class="col-6 text-left">
                      <p class="black-color font-w-100 font-18 mb-0" *ngIf="booking_Detail.booking_status != 'Success'"> Amount Payable </p>
                      <p class="black-color font-w-100 font-18 mb-0" *ngIf="booking_Detail.booking_status == 'Success'"> Amount Paid </p>

                    </div>
                    <div class="col-6 text-right">
                      <p class="black-color font-w-100 font-18 mb-0"> $ {{booking_Detail.service_total_price}}</p>

                    </div>
                  </div>
                </div><!-- end of Amount Payable -->
                
                <div class="px-3 pt-4 pb-3 border-bottom" *ngIf="booking_Detail.booking_status == 'Success'">
                  <div class="row mb-2">
                    <div class="col-6 text-left">
                      <p class="black-color font-w-100 font-18 mb-0"> Type Of Payment </p>
                    </div>
                    <div class="col-6 text-right">
                      <p class="black-color font-w-100 font-18 mb-0" >{{booking_Detail.payment_type}}</p>
                    </div>
                  </div>
                </div>
                <!-- end of Amount Payable -->


                <div class="px-3 py-4 text-center" >
                  <!-- <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click)="redirect()" *ngIf="backUrl == '/book-appointment'" > Confirm Booking </button> -->
                  <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click)="ChnageBooking()" *ngIf="(backUrl == '/appointment' || backUrl == '/my-appointment') && booking_Detail.booking_status =='Confirm'" > Mark as complete </button>
                  <button type="button" class="btn btn-red-grad w-75 text-uppercase mb-4" style="color:red" (click)="canclebooking()" *ngIf="booking_Detail.booking_status =='Confirm'" > Cancel Booking </button>
                  <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click)="showPayment = false " *ngIf="(backUrl == '/appointment' || backUrl == '/my-appointment') && booking_Detail.booking_status =='Completed'" > Pay Now </button>
                  <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click)="paymentMode = '3'" *ngIf="(backUrl == '/appointments') && booking_Detail.booking_status =='Completed'" > Pay Now </button>
                  <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4"  *ngIf=" booking_Detail.booking_status =='Success'" > Booking Completed </button>
                  <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4"  *ngIf=" booking_Detail.booking_status =='Cancel'" > Cancelled </button>


                  <!-- <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click)="ChnageBooking()" *ngIf="backUrl == '/book-appointment' && booking_Detail.booking_status ==''" >  </button> -->

                  <!-- <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4"> rescedule </button>
                  <button type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click) ="canclebooking()"> cancel appointment </button>
                  <a href="Javascript:void(0);" class="d-block brand-color1 font-18 mb-0"> View Policy </a> -->

                  <!-- <button data-target="#busLocation" data-toggle="modal" type="button" class="btn btn-blue-grad w-75 text-uppercase mb-4" (click) ="canclebooking()"> cancel appointment </button> -->

                </div><!-- end of button and view policy -->
        
                <div class="mt-2 ml-3 pb-2" *ngIf="!showPayment">
                  <p class="brand-color3 font-14 mb-2">Payment Mode</p>                  
                  <div class="d-flex flex-wrap" >
                    <div class="radiotype-btn">
                        <input type="radio" class="customradio" id="1" value="cash" name="paymentMethod"  [(ngModel)]="paymentMode" [ngModelOptions]="{standalone: true}" (change)="getpaymentMode($event)">
                        <label>Cash/Check</label>
                    </div>
                    <div class="radiotype-btn ml-3">
                        <input type="radio" class="customradio" id="3" value="card" name="paymentMethod"  [(ngModel)]="paymentMode" [ngModelOptions]="{standalone: true}" (change)="getpaymentMode($event)">
                        <label>Card</label>
                    </div>
                </div>
  
                <!-- <p class="brand-color3 font-14 mb-2" *ngIf="paymentMode == '3'">Card Type</p> 
                    <div class="d-flex flex-wrap" >
                    <div class="radiotype-btn">
                        <input type="radio" class="customradio1" id="1" value="gift_card" name="cardMethod"  [(ngModel)]="cardMethod" [ngModelOptions]="{standalone: true}" (change)="getcardMode($event)">
                        <label>Gift Card</label>
                    </div>
                    <div class="radiotype-btn ml-3">
                        <input type="radio" class="customradio1" id="2" value="debit_card" name="cardMethod"  [(ngModel)]="cardMethod" [ngModelOptions]="{standalone: true}" (change)="getcardMode($event)">
                        <label>Debit Card</label>
                    </div>
                      <div class="radiotype-btn ml-3">
                        <input type="radio" class="customradio1" id="3" value="credit_card" name="cardMethod"  [(ngModel)]="cardMethod" [ngModelOptions]="{standalone: true}" (change)="getcardMode($event)">
                        <label>Credit Card</label>
                    </div>
                </div>
                <div *ngIf ="cardMethod !='gift_card'" >
                  
                <select>
                  <option value="">Select Card type</option>
                  <option value="visa"> Visa Card</option>
                  <option value="master"> Master Card</option>
                  <option value="amex"> Amex</option>
                  <option value="am"> American Express</option>
                  <option value=" interac">  Interac </option>
                  <option value="discover"> Discover </option>
                </select>
              </div> -->
                  
                
                </div><!-- Gender -->  
                <div class="card-details" *ngIf="paymentMode == '3'">
  
                  <div class="client-payment-input border-radius6 box-shadow1 white-bg p-4"> 
                    <div class="row">
                      <div class="col-12 mb-3" *ngFor="let cardsave of customerData">
                        <div class="client-card-img white-bg border-radius6 box-shadow1" *ngIf="cardsave.length != 0">
                          <label class="select-card select-card-img select-card-cvv mb-2"> 
                            <img src="assets/img/visa_card.png" *ngIf="cardsave.card_type== 'visa'" class="img-fluid payment_img">
                            <img src="assets/img/master_card.png" *ngIf="cardsave.card_type== 'mc'" class="img-fluid payment_img">
                           <img src="assets/img/american_express.png" *ngIf="cardsave.card_type== 'am'" class="img-fluid payment_img">
                           <!--   <img src="assets/img/interac" *ngIf="cardsave.card_type== 'mc'" class="img-fluid payment_img">
                            <img src="assets/img/amex.png" *ngIf="cardsave.card_type== 'mc'" class="img-fluid payment_img">
                            <img src="assets/img/discover.png" *ngIf="cardsave.card_type== 'mc'" class="img-fluid payment_img"> -->
    
                            <p class="mb-0 font-12 dark-color mt-2">{{cardsave.number}} </p>
                            <h5 class="mb-0 font-12 dark-color mt-2">Valid Till(MM/YYYY) </h5>
                            <p class="mb-0 font-12 dark-color mt-2">{{cardsave.expiry_month}} / {{cardsave.expiry_year}}</p>
                            <input type="radio" checked="checked" name="radio2" [id]="cardsave.card_id" [value]="cardsave.card_id" [(ngModel)]="cardType" [ngModelOptions]="{standalone: true}" (change)="getCardType($event)">
                            <span class="checkmark"></span>
                          </label>                         
                            
                          <form [formGroup]="savedCard"  *ngIf="cardsave.checked == true && cardType == cardsave.card_id" >
                          <div class="text-center d-flex ml-2">
                            <input type="password" autocomplete="off" class="form-control w-25 ml-5" onkeyup="this.value=this.value.replace(/^\s+/g, '')" placeholder="CVV" pattern="\d{3,4}"  onKeyPress="if(this.value.length >=4) return false;" formControlName="cvv_no" [ngClass]="{ 'is-invalid': submitted && sf.cvv_no.errors }">
                            <div *ngIf="submitted && sf.cvv_no.errors" class="invalid-feedback">
                                <div *ngIf="sf.cvv_no.errors.required">CVV is required</div>  
                                <div *ngIf="sf.cvv_no.errors.pattern">CVV is not valid</div> 
                             </div> 
                            <div class="form-group client-buy-input-cardno" *ngIf="booking_Detail.tip_option == 'yes'">
                              <p class="text-left font-12 dark-color"> Tip </p>
                              <input type="number"  autocomplete="off" class="form-control" onkeyup="this.value=this.value.replace(/^\s+/g, '')" [(ngModel)]="TipAmount"  [ngModelOptions]="{standalone: true}"  onKeyPress="if(this.value.length >= 3) return false;" >
                              </div>
                            <button type="button" class="btn btn-blue-grad px-4 w-25 text-uppercase mb-0 mb-md-3 ml-5" (click)="generateToken(2)"> Pay </button>
                          </div>
                        </form>
                        </div>
                      </div><!-- end of Master Card --> 
                      <div class="col-12 mb-3">
                        <div class="white-bg border-radius6 box-shadow1">
                          <label class="select-card"> New Card
                            <input type="radio" checked="checked" name="radio1" id="new" value="new" [(ngModel)]="cardType" [ngModelOptions]="{standalone: true}" (change)="getCardType($event)">
                            <span class="checkmark"></span>
                          </label>
                        </div>
                      </div><!-- end of New Card -->        
                     
                    </div> <!-- end of row -->
            </div>
                    <!-- <h5 class="payment-head p-3 font-arialrouded text-capitalize">Debit/Credit Card Details</h5> -->
                    <form [formGroup]="paymentCard" *ngIf="cardType == 'new'" >
                      <div class="row py-4 px-3">
                        <div class="col-12 col-sm-6">
                          <div class="form-group">
                            <p class="brand-color3 text-left font-14 mb-2"> Name On Card </p>
                            <input type="text"  class="form-control" autocomplete="off" onkeyup="this.value=this.value.replace(/^\s+/g, '')" placeholder="Sophie Joe" formControlName="card_holder_name" [ngClass]="{ 'is-invalid': submitted && f.card_holder_name.errors }">
                            <div *ngIf="submitted && f.card_holder_name.errors" class="invalid-feedback">
                              <div *ngIf="f.card_holder_name.errors.required">Card Holder Name is required</div> 
                              <div *ngIf="f.card_holder_name.errors.pattern">Card Holder Name is required</div>  
                             </div>
                          </div>
                        </div><!-- First Name -->
      
                        <div class="col-12 col-sm-6">
                          <div class="form-group client-buy-input-cardno">
                            <p class="brand-color3 text-left font-14 mb-2"> Card Number </p>
                            <input type="text"  autocomplete="off" class="form-control" onkeyup="this.value=this.value.replace(/^\s+/g, '')" placeholder="4121 4411 3131 8554" pattern="\d{15,19}" onKeyPress="if(this.value.length >= 19) return false;" formControlName="card_number" [ngClass]="{ 'is-invalid': submitted && f.card_number.errors }">
                            <!-- <img src="assets/img/ic_visacard.png" class="input-visa-img">  -->
                            <div *ngIf="submitted && f.card_number.errors" class="invalid-feedback">
                              <div *ngIf="f.card_number.errors.required">Card Number is required</div>  
                              <div *ngIf="f.card_number.errors.pattern">Card Number is not valid</div>  
  
                           </div>                   </div>
                        </div><!-- Last Name -->
      
                        <div class="col-12 col-sm-6 mt-2 mt-md-3">
                          <div class="form-group">
                            <p class="brand-color3 text-left font-14 mb-2"> Valid Till </p>
                            <input type="text"  autocomplete="off" class="form-control"  placeholder="MM/YYYY" formControlName="expiry"  [ngClass]="{ 'is-invalid': submitted && f.expiry.errors }" minlength="7" maxlength="7" onKeyPress="if(this.value.length == 2) return this.value=this.value.replace(this.value, this.value+'/');"pattern="^\d{2}/\d{4}">
                            <!-- <input type="number"  class="form-control"  placeholder="MM/YYYY" formControlName="expiry" pattern="\d{2}/\d{2}"  onKeyPress="if(this.value.length >=5) return false;" [ngClass]="{ 'is-invalid': submitted && f.expiry.errors }"> -->
                            <div *ngIf="submitted && f.expiry.errors" class="invalid-feedback">
                                <div *ngIf="f.expiry.errors.required">Valid Till is required</div>  
                                <div *ngIf="f.expiry.errors.pattern">Valid Till is like MM/YY</div>  
  
                             </div>
                          </div>
                        </div><!-- Email  onPaste="return false" -->
      
                        <div class="col-12 col-sm-6 mt-2 mt-md-3">
                          <div class="form-group">
                            <p class="brand-color3 text-left font-14 mb-2"> CVV </p>
                            <input type="password" autocomplete="off" class="form-control" onkeyup="this.value=this.value.replace(/^\s+/g, '')" placeholder="eg. 201" pattern="\d{3,4}"  onKeyPress="if(this.value.length >=4) return false;" formControlName="cvv_no" [ngClass]="{ 'is-invalid': submitted && f.cvv_no.errors }">
                            <div *ngIf="submitted && f.cvv_no.errors" class="invalid-feedback">
                                <div *ngIf="f.cvv_no.errors.required">CVV is required</div>  
                                <div *ngIf="f.cvv_no.errors.pattern">CVV is not valid</div>  
  
                             </div>
                          </div>
                        </div>
                        <div class="col-12 col-sm-6" *ngIf="booking_Detail.tip_option == 'yes'">
                          <div class="form-group client-buy-input-cardno">
                            <p class="brand-color3 text-left font-14 mb-2"> Tip </p>
                            <input type="number"  autocomplete="off" class="form-control" onkeyup="this.value=this.value.replace(/^\s+/g, '')" [(ngModel)]="TipAmount" [ngModelOptions]="{standalone: true}"  onKeyPress="if(this.value.length >= 3) return false;" >
                            </div>
                        </div>
                        <!-- Last Name -->
                        
                        <!-- <div class="col-12">
                          <input type="checkbox" (change)="Savecard($event)"> Save Card
                        </div>
                         -->
                        <!-- end of button and view policy -->                                 
                        <div class="w-100 py-5 text-center">
                          <button type="button" class="btn btn-blue-grad px-4 w-50 text-uppercase mb-0 mb-md-5" (click)="generateToken(1)"> Pay </button>
                        </div>
                      </div>
                    </form>
                </div>
  
                <div class="card-details" *ngIf="paymentMode == '1'">
                  <!-- <h5 class="payment-head p-3 font-arialrouded text-capitalize">Cash Details</h5> -->
                <form [formGroup]="ReferenceDetail">
                  <div class="d-flex flex-wrap py-3">
                    <div class="col-md-12 form-group">
                      <label>Transaction Number</label>
                      <input type="text" class="form-control" formControlName="referenceid" [ngClass]="{ 'is-invalid': submitted && rf.referenceid.errors }">
                      <div *ngIf="submitted && f.referenceid.errors" class="invalid-feedback">
                          <div *ngIf="rf.referenceid.errors.required">Transaction  Number</div>  
                          <!-- <div *ngIf="f.referenceid.errors.pattern">Reference Number</div>   -->
  
                       </div>
                  </div>
                  <div class="col-md-12 form-group">
                      <label>Notes</label>
                      <input type="text" class="form-control" formControlName="payment_note" [ngClass]="{ 'is-invalid': submitted && rf.payment_note.errors }">
                      <!-- <div *ngIf="submitted && f.cvv_no.errors" class="invalid-feedback">
                          <div *ngIf="f.cvv_no.errors.required">CVV is required</div>  
                          <div *ngIf="f.cvv_no.errors.pattern">CVV is not valid</div>  
                       </div> -->
                  </div>
                  </div>
                  <div class="px-3 py-5 text-center" >
                    <button type="button" class="btn btn-blue-grad px-4 w-50 text-uppercase mb-0 mb-md-5" (click)="PayAtStudio()"> Pay </button>
                  </div><!-- end of button and view policy -->
                  </form>
  
                  </div>
              <!-- </div> -->
  
                </div>
          </div><!-- end of row -->          
        </div><!-- end of s-d-appoint-block -->   
      </div><!-- end of s-d-appoint -->

    </div><!-- end of container -->
  </div>  

</div>
<app-inner-footer></app-inner-footer>